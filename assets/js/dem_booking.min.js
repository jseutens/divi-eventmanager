jQuery(document).ready(function(){
	if( jQuery('body').find('.popup-gallery').length >0 ){							
		jQuery('.popup-gallery').magnificPopup({
			delegate: 'a',
			type: 'image',
			tLoading: 'Loading image #%curr%...',
			mainClass: 'mfp-img-mobile',
			gallery: {
				enabled: true,
				navigateByImgClick: true,
				preload: [0,1] // Will preload 0 - before current, and 1 after the current image
			},
			image: {
				tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
				titleSrc: function(item) {
					return item.el.attr('title') ;
				}
			}
		});		
	}
	if ( et_booking_ajax_url.divi_dem_hide_form !== 'on' ){
    /*Paypal*/
	if( jQuery('body').find('#dem_ticket_booking_paypal').length >0 ){
			 jQuery('#dem_detail_no_of_ticket').change(function(){
				var inputValue = jQuery(this).val();
				var ticketPrices =  jQuery('#dem_detail_single_ticket_prices').val();
				var ticketCurrencySymbol =  jQuery('#dem_detail_ticket_currency_symbol_position').val();
				var ticketCurrencySymbolName  =  jQuery('#dem_detail_ticket_currency_symbol_name').val();
				var output = inputValue * ticketPrices ;
				if(ticketCurrencySymbol === 'suffix'){
					var outputValue = output+' '+ticketCurrencySymbolName ;
				}else {
					var outputValue = ticketCurrencySymbolName+' '+output ;
				}
				jQuery('#dem_detail_total_ticket_price').val(outputValue);
				jQuery( "input[name='quantity']" ).val(inputValue);
			});
			jQuery("#dem_ticket_booking_paypal").validate({
				rules: {
						dem_detail_name: "required",
						dem_detail_email_id: "required",
						dem_detail_phone_no: {
							required: true,
							minlength: 10
						}
					},
					messages: {
						dem_detail_name: "Please enter your name",
						dem_detail_email_id: "Please enter a valid email address",
						dem_detail_phone_no: {
							required: "Please enter a phone number",
							minlength: "Your phone number must consist of at least 10 Number"
						}
					}
		
			});
			  jQuery('#dem_ticket_booking_paypal').on('submit', function (e) {
			  var form = jQuery(this);
			  if(!form.hasClass('pending')) {
				  e.preventDefault();
				  form.addClass('pending');
				var BookingForm = jQuery(this).serialize();
				jQuery.ajax({
					type   : "POST",
					data   : {
								book_data: BookingForm,
								book_nonce_data : jQuery( '#dem_ticket_booking_paypal_nonce' ).val(), 
								book_email_data : jQuery( '#dem_detail_email_id' ).val(), 
								book_return_url : jQuery( "input[name='return']" ).val(), 
								action: 'make_booking'
					},
					url    : et_booking_ajax_url.url,
					success: function(data){
						if(data['success'] === 1){
							jQuery( "input[name='return']" ).val(data['url']);
							form.submit();
						}else{
							alert("Please fill required fields!");
							form.removeClass('pending');
						}
					}
				});
			  }
			});
	}
     /*Inquiry*/
    if( jQuery('body').find('#dem_ticket_inquiry').length >0 ){
			if ( et_booking_ajax_url.divi_dem_price_inquiry_form === 'on' ){
					
					 jQuery('#dem_detail_no_of_ticket').change(function(){
					var inputValue = jQuery(this).val();
					var ticketPrices =  jQuery('#dem_detail_single_ticket_prices').val();
					var ticketCurrencySymbol =  jQuery('#dem_detail_ticket_currency_symbol_position').val();
					var ticketCurrencySymbolName  =  jQuery('#dem_detail_ticket_currency_symbol_name').val();
					var output = inputValue * ticketPrices ;
					if(ticketCurrencySymbol === 'suffix'){
						var outputValue = output+' '+ticketCurrencySymbolName ;
					}else {
						var outputValue = ticketCurrencySymbolName+' '+output ;
					}
					jQuery('#dem_detail_total_ticket_price').val(outputValue);
					//jQuery( "input[name='quantity']" ).val(inputValue);
				});
					 
			}
			jQuery("#dem_ticket_inquiry").validate({
				rules: {
						dem_detail_name: "required",
						dem_detail_email_id: "required",
						dem_detail_phone_no: {
							required: true,
							minlength: 10
						}
					},
					messages: {
						dem_detail_name: "Please enter your name",
						dem_detail_email_id: "Please enter a valid email address",
						dem_detail_phone_no: {
							required: "Please enter a phone number",
							minlength: "Your phone number must consist of at least 10 Number"
						}
					}
			});
			  jQuery('#dem_ticket_inquiry').on('submit', function (e) {
			  var form = jQuery(this);
			  if(!form.hasClass('pending')) {
				  e.preventDefault();
				  form.addClass('pending');
				var BookingForm = jQuery(this).serialize();
				jQuery.ajax({
					type   : "POST",
					data   : {
								book_data: BookingForm,
								book_nonce_data : jQuery( '#dem_ticket_booking_paypal_nonce' ).val(), 
								book_email_data : jQuery( '#dem_detail_email_id' ).val(),
								book_return_url : jQuery( "input[name='return']" ).val(), 
								action: 'make_inquiry'
					},
					url    : et_booking_ajax_url.url,
					success: function(data){
						if(data['success'] === 1){
							jQuery( "input[name='return']" ).val(data['url']);
							jQuery('#dem_ticket_inquiry').attr('action', data['url']);
							form.submit();
						}else{
							alert("Please fill required fields!");
							form.removeClass('pending');
						}
					}
				});
			  }
			}); 
	}
	setTimeout(function(){ jQuery( ".et-pb-contact-message" ).hide(); }, 3000);
	} // end if
});